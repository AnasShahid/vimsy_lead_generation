---
phase: 2
plan: 3
name: Enrichment Page UI — Tabs, Filters, Contact Details
wave: 2
depends_on: [02-01, 02-02]
autonomous: true
---

# Phase 2 Plan 3: Enrichment Page UI — Tabs, Filters, Contact Details

## Objective

Build the full Enrichment page with Hunter.io and Snov.io tabs, a site list showing enrichment-stage sites, Hunter.io filter form with all domain-search parameters, batch enrichment trigger with progress tracking, and an expandable contact details panel per site. This is the user-facing implementation of the enrichment workflow.

## Context

**Requirements addressed:** REQ-016 (UI portion)
**Phase goal contribution:** Completes the enrichment user experience — from viewing sites to configuring filters to viewing discovered contacts.

## Tasks

### Task 1: Build Enrichment page layout with provider tabs

**Files:** `client/src/pages/EnrichmentPage.tsx`

**Action:**

Replace the placeholder EnrichmentPage with a full implementation:
- Header: "Step 2: Contact Enrichment" with subtitle
- Two tabs: **Hunter.io** (active, functional) and **Snov.io** (placeholder with "Coming Soon" message)
- Follow the same tab pattern used in DiscoveryPage.tsx
- Hunter.io tab content:
  - Top section: site list table showing sites in enrichment stage
  - Each row: checkbox, domain, company name, enrichment status badge (pending/enriching/enriched/error), contact count
  - Batch action toolbar: "Enrich Selected" button (disabled when no selection or no API key)
  - Filter panel (collapsible or sidebar)
- Snov.io tab: simple placeholder card saying "Snov.io integration coming soon"

Fetch enrichment sites from `GET /api/enrichment/sites` on mount and after enrichment jobs complete.

**Verify:**
```bash
cd client && npx tsc --noEmit
```

**Done when:**
- EnrichmentPage renders with two tabs
- Hunter.io tab shows site list from API
- Snov.io tab shows placeholder
- Tab switching works correctly

---

### Task 2: Build Hunter.io domain-search filter form

**Files:** `client/src/components/enrichment/HunterEnrichmentForm.tsx`

**Action:**

Create a filter form component with these controls:
- **Seniority** — multi-select dropdown: junior, senior, executive
- **Department** — multi-select dropdown: executive, it, finance, management, sales, legal, support, hr, marketing, communication, education, design, health, operations
- **Type** — single-select: all, personal, generic
- **Required field** — single-select: none, full_name, position, phone_number
- **Verification status** — multi-select: valid, accept_all, unknown (include/exclude toggle)
- **Location** — text inputs for country code, state, city (with include/exclude toggle)
- **Job titles** — text input (comma-separated)
- **Max results per domain** — number input, 1-15, default 5
- **API Key** — text input (pre-filled from settings if available)

The form should:
- Be collapsible/expandable (default expanded on first visit)
- Show current filter summary when collapsed
- Domain and company are auto-populated from the selected site(s), NOT user-editable in the form
- On "Enrich Selected": collect filters + selected site IDs → call `POST /api/enrichment/jobs`
- Show loading state during job creation

Reuse the MultiSelect component pattern from HunterDiscoverForm.

**Verify:**
```bash
cd client && npx tsc --noEmit
```

**Done when:**
- All Hunter.io domain-search filters exposed in the form
- Multi-select dropdowns for seniority, department, verification
- Number input for max results (1-15, default 5)
- Form submits enrichment job via API
- Loading/disabled states work correctly

---

### Task 3: Build contact details expandable panel

**Files:** `client/src/components/enrichment/ContactDetailsPanel.tsx`, `client/src/components/enrichment/EnrichmentSiteTable.tsx`

**Action:**

Create `EnrichmentSiteTable.tsx`:
- Table of sites in enrichment stage
- Columns: checkbox, domain, company, enrichment status, contacts count, last enriched date
- Clickable rows — clicking expands to show contacts
- Enrichment status shown as colored badges:
  - pending → gray
  - enriching → blue/spinning
  - enriched → green
  - error → red
- Checkbox selection for batch enrichment

Create `ContactDetailsPanel.tsx`:
- Shown when a site row is expanded/clicked
- Fetches contacts from `GET /api/enrichment/sites/:id/contacts`
- Displays a card/table for each contact:
  - Full name (first + last)
  - Email with verification badge (green checkmark for valid, yellow for accept_all, gray for unknown)
  - Position / Title
  - Seniority badge
  - Department
  - LinkedIn URL (clickable link, opens in new tab)
  - Twitter handle
  - Phone number
  - Confidence score (as percentage bar or number)
  - Source: Hunter.io badge
- Empty state: "No contacts found. Run enrichment to discover contacts."
- Loading state while fetching

**Verify:**
```bash
cd client && npx tsc --noEmit
```

**Done when:**
- Site table shows enrichment-stage sites with status badges
- Clicking a site row expands to show contacts
- Contact cards display all fields from Hunter.io response
- Verification status shown with visual badges
- LinkedIn URLs are clickable
- Empty and loading states handled

---

## Verification

After all tasks complete:

```bash
cd client && npx tsc --noEmit
cd server && npx tsc --noEmit
# Navigate to /enrichment in browser
# Verify tabs, site list, filter form, and contact details all render
```

## Success Criteria

- [ ] Enrichment page has Hunter.io and Snov.io tabs
- [ ] Hunter.io tab shows sites in enrichment stage with status badges
- [ ] Filter form exposes all domain-search parameters (seniority, department, type, required_field, verification, location, job titles, max results)
- [ ] "Enrich Selected" creates background job and shows progress
- [ ] Clicking a site row reveals contact details panel
- [ ] Contact cards show name, email, position, seniority, department, LinkedIn, verification badge, confidence
- [ ] Re-enrichment with different filters adds new contacts (no duplicates)
- [ ] Snov.io tab shows placeholder

## Output

**Files created:**
- `client/src/components/enrichment/HunterEnrichmentForm.tsx` — Filter form for Hunter.io domain-search
- `client/src/components/enrichment/EnrichmentSiteTable.tsx` — Site list table for enrichment stage
- `client/src/components/enrichment/ContactDetailsPanel.tsx` — Expandable contact details view

**Files modified:**
- `client/src/pages/EnrichmentPage.tsx` — Full enrichment page with tabs and layout
